---
title: "R Markdown mini workshop"
author: "Theresa Elise Wege"
output:
  html_document: 
    toc: true
    toc_float:
      collapsed: false
      smooth_scroll: false
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.
For a quick guide to R markdown documents check out the [R Markdown cheat sheet](https://www.rstudio.com/wp-content/uploads/2016/03/rmarkdown-cheatsheet-2.0.pdf) 
It allows you for example to include some more explanation on your analysis (i.e. the preregistration text and a link to your preregistration) and pictures.

## Knitr

Markdown isn't only useful for commenting your analysis within your R script, but it also allows you to combine text, code and tables/ graphs in a html or PDF document. This functionality is provided by the knitr package, which you can install by running `install.packages('knitr')` in your Console.
When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. 

## Code chunks

You can embed an R code chunk like this:

````{r}

#code

````

A code chunk is considered one unit of analysis and by clicking the green arrow in the right corner you can run all the code in one chunk from the top to bottom.
The ouptput of the codechunk will then be displayed below the chunk. 
You can modify the behaviour of a code chunk

* include = FALSE prevents code and results from appearing in the finished file. R Markdown still runs the code in the chunk, and the results can be used by other chunks.
* echo = FALSE prevents code, but not the results from appearing in the finished file. This is a useful way to embed figures.
* message = FALSE prevents messages that are generated by code from appearing in the finished file.
* warning = FALSE prevents warnings that are generated by code from appearing in the finished.

# Analysis documentation

## Packages

I usually start my file with loading all packages that I need for my analyses.

```{r, include=FALSE}
library(datasets)
library(tidyverse)
library(psych)
library(summarytools)
```

If you imagine that someone (maybe you) opens that analysis in 10 years from now and tries to run it again the packages you used have gone through hundreds of updates and new versions. Your code might now do something unexpected or throw error messages where things initally went smoothly. A great way to prevent this and also allow anyone else to run your script with exactly the same versions that you used is provided by the packrat package. It creates a library of the packages in their current versions and keeps them available to your analyses. Install packrat like this `install.packages('packrat')` and then initiate a library for your document

```{r}
#packrat::init()
```

## Data

In the next code chunk I load my data set and maybe add another code chunk to this section that does the data cleaning and preprocessing. 

```{r}
data(iris)
```


## Descriptives {.tabset}

For the describtive statistics and maybe also for your analyses later your might want to have tabs in an html document instead of having to scroll down. You can do this by adding `{.tabset}` after the header of the section. It will then consider subheading new tabs.

### summary table

```{r}
print(dfSummary(iris, style = 'grid', plain.ascii = FALSE, graph.magnif = 0.85), 
method = 'render', omit.headings = TRUE)
```

### summary plots

```{r, echo=FALSE}

ggplot(iris, aes(Species, Sepal.Length)) +
  geom_boxplot()

```

